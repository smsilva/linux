#!/bin/bash
set -e

TAG=$1
DESCRIPTION=$2

if [ -z "${TAG}" ]; then
  echo "You should inform a tag as a parameter"
  exit 1
fi

git push origin :refs/tags/${TAG?}

if [ -z "${DESCRIPTION}" ]; then
  git tag -fa ${TAG?}
else
  git tag -fa ${TAG?} -m "${DESCRIPTION}"
fi

git push origin master --tags
